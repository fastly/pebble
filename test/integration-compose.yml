version: "3"
services:
  pebble:
    build:
      context: .
      dockerfile: docker/pebble/linux.Dockerfile
  challtestsrv:
    build:
      context: .
      dockerfile: docker/pebble-challtestsrv/linux.Dockerfile
  integration:
    build:
      context: https://github.com/eggsampler/acme.git
      dockerfile_inline: |
        # syntax=docker/dockerfile:1
        FROM golang:1.21-alpine
        RUN apk add --no-cache build-base
        WORKDIR /go/src/github.com/eggsampler/acme
        COPY . .
    depends_on:
      - pebble
      - challtestsrv
    networks:
      acmenet:
        ipv4_address: 10.30.50.4
